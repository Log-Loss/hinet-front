webpackJsonp([30],{689:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(7),u=n(r),o=a(118),s=n(o),c=a(285),l=n(c);a(286);var d=a(280);a(176);t.default={namespace:"job",state:{jobs:[],job:{},lossAmount:0},effects:{run:s.default.mark(function e(t,a){var n,r,u,o,c,p,i=t.payload,f=a.call,y=a.put,h=a.select;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({type:"changeLoading",payload:!0});case 2:return e.next=4,y({type:"setRunConfig",payload:i});case 4:return e.next=6,h(function(e){return e.model.model.id});case 6:return n=e.sent,e.next=9,h(function(e){return e.job});case 9:return r=e.sent,u=r.epochs,o=r.batchSize,e.next=14,f(d.createJob,{modelId:n,epochs:u,batchSize:o});case 14:if(c=e.sent,200!==c.code||!c.result||!c.result.id){e.next=24;break}return e.next=18,y({type:"fetch"});case 18:return e.next=20,f(d.startJob,c.result.id);case 20:p=e.sent,200===p.code?l.default.success({message:"Start Running!"}):l.default.error({message:"Run Failed!"}),e.next=25;break;case 24:l.default.error({message:"Create Failed!"});case 25:return e.next=27,y({type:"changeLoading",payload:!1});case 27:case"end":return e.stop()}},e,this)}),fetch:s.default.mark(function e(t,a){var n,r,u=t.payload,o=a.call,c=a.put,l=a.select;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({type:"changeLoading",payload:!0});case 2:return e.next=4,l(function(e){return e.model.model.id});case 4:return n=e.sent,e.next=7,o(d.queryJobByModel,u||n);case 7:return r=e.sent,e.next=10,c({type:"queryJobs",payload:Array.isArray(r.result)?r.result:[]});case 10:return e.next=12,c({type:"changeLoading",payload:!1});case 12:case"end":return e.stop()}},e,this)}),fetchJob:s.default.mark(function e(t,a){var n,r=t.payload,u=a.call,o=a.put;a.select;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({type:"changeLoading",payload:!0});case 2:return e.next=4,u(d.queryJob,r);case 4:return n=e.sent,e.next=7,o({type:"queryJob",payload:n.result});case 7:return e.next=9,o({type:"changeLoading",payload:!1});case 9:case"end":return e.stop()}},e,this)})},reducers:{queryJobs:function(e,t){var a=t.payload;return(0,u.default)({},e,{jobs:a,job:a.length?a[a.length-1]:void 0})},queryLossAmount:function(e,t){var a=t.payload;return(0,u.default)({},e,{lossAmount:a})},queryJob:function(e,t){var a=t.payload;return(0,u.default)({},e,{job:a})},setRunConfig:function(e,t){var a=t.payload;return(0,u.default)({},e,{epochs:a.epochs,batchSize:a.batchSize})}}},e.exports=t.default}});